<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Tetromino 2K</title><style>body{margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;white-space:pre}canvas{background:#111}</style></head><body>
Tetromino 2K | A Tetris clone in 2KB. | v1.0.3  <a href="https://landonjsmith.com/">Home</a>
<canvas id="c" width="280" height="504"></canvas>
<div id="info"></div><div id="go"></div><script>
let ctx=c.getContext("2d"),R=18,C=10,B=28,b=Array.from({length:R},()=>Array(C).fill(0)),s=[[[1,1,1],[0,1,0]],[[1,1],[1,1]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]],[[1,1,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]],cols=["#000","#f00","#0f0","#00f","#ff0","#f0f","#0ff","#fff"],cur={x:0,y:0,shape:[],c:0},next={},clr=[],score=0,level=1,i=info,go=document.getElementById("go"),G=0,last=0,drop=500;
function rnd(){let t=Math.floor(Math.random()*s.length);return{x:3,y:0,shape:s[t],c:t+1}}
function v(x,y,S){return S.every((r,dy)=>r.every((c,dx)=>!c||(x+dx>=0&&x+dx<C&&y+dy>=0&&y+dy<R&&!b[y+dy][x+dx])))}
function m(){cur.shape.forEach((r,dy)=>r.forEach((c,dx)=>{if(c)b[cur.y+dy][cur.x+dx]=cur.c}))}
function cl(){for(let y=R-1;y>=0;y--)if(b[y].every(c=>c)){clr.push({row:y,step:0});score+=100;if(score%500==0)level++;}}
function ac(){for(let j=clr.length-1;j>=0;j--){let l=clr[j];if(l.step<C){b[l.row][l.step]=0;l.step++}else{b.splice(l.row,1);b.unshift(Array(C).fill(0));clr.splice(j,1)}}}
function rot(S){return S[0].map((_,i)=>S.map(r=>r[r.length-1-i]))}
function dB(x,y,c){let p=B-2;ctx.fillStyle=cols[c];ctx.fillRect(x*B+1,y*B+1,p,p)}
function draw(){ctx.clearRect(0,0,C*B,R*B);for(let y=0;y<R;y++)for(let x=0;x<C;x++)if(b[y][x])dB(x,y,b[y][x]);cur.shape.forEach((r,dy)=>r.forEach((c,dx)=>{if(c)dB(cur.x+dx,cur.y+dy,cur.c)}));i.innerText="Score:"+score+"\nLevel:"+level+"\nNext:\n"+next.shape.map(r=>r.map(c=>c?'##':'..').join('')).join('\n')}
function spawn(){cur=next;next=rnd();if(!v(cur.x,cur.y,cur.shape))gameOver()} 
function gameOver(){G=1;go.innerHTML="GAME OVER\n<button onclick='restart()'>Restart</button>"}
function restart(){b=Array.from({length:R},()=>Array(C).fill(0));score=0;level=1;clr=[];G=0;last=0;next=rnd();spawn();loop();go.innerHTML="";}
document.addEventListener("keydown",e=>{
  if(G)return;
  let k=e.key.toLowerCase();
  if(k=="a"&&v(cur.x-1,cur.y,cur.shape))cur.x--;
  if(k=="d"&&v(cur.x+1,cur.y,cur.shape))cur.x++;
  if(k=="s"&&v(cur.x,cur.y+1,cur.shape))cur.y++;
  if(k=="w"){let r=rot(cur.shape);if(v(cur.x,cur.y,r))cur.shape=r}
  if(k==" "){while(v(cur.x,cur.y+1,cur.shape))cur.y++;m();cl();spawn()}
});
next=rnd();spawn();
function loop(t){if(G)return;if(t-last>drop-(level*50)){if(v(cur.x,cur.y+1,cur.shape))cur.y++;else{m();cl();spawn()}last=t}ac();draw();requestAnimationFrame(loop)}
loop();
</script>
</body></html>